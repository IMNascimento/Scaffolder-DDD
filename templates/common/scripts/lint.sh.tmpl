#!/usr/bin/env bash
set -e
export PYTHONPATH=./src

echo "ğŸ” Executando verificaÃ§Ãµes de qualidade..."

ERRORS=0

echo "ğŸ“ Ruff (linter)..."
if [ "$1" = "--fix" ]; then
    ruff check . --fix || ((ERRORS++))
else
    ruff check . || ((ERRORS++))
fi

echo "ğŸ¨ Ruff (formatter)..."
if [ "$1" = "--fix" ]; then
    ruff format . || ((ERRORS++))
else
    ruff format --check . || ((ERRORS++))
fi

echo "ğŸ”’ MyPy (type checking)..."
mypy src/ || ((ERRORS++))

if [ $ERRORS -eq 0 ]; then
    echo "âœ… Todas as verificaÃ§Ãµes passaram!"
    exit 0
else
    echo "âŒ $ERRORS verificaÃ§Ã£o(Ãµes) falharam!"
    exit 1
fi
